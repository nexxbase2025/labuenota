
<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>LA PELI DE LA SEMANA</title>
<style>
  html, body {
    margin:0; padding:0;
    background:black;
    width:100%; height:100%;
    overflow:hidden;
  }
  #movie, #adVideo {
    position: fixed;
    top:0; left:0;
    width:100vw;
    height:100vh;
    object-fit:contain;
    background:black;
  }
  #backButton {
    position: fixed;
    top:20px;
    left:20px;
    background: rgba(0,0,0,0.6);
    color:white;
    border:none;
    border-radius:50%;
    padding:10px 15px;
    font-size:18px;
    cursor:pointer;
    display:none;
    z-index:1000;
  }
  #adOverlay {
    position: fixed;
    top:0; left:0;
    width:100vw; height:100vh;
    background:black;
    display:flex;
    justify-content:center;
    align-items:center;
    z-index:999;
  }
  #adOverlay video {
    width:100%; height:100%;
    object-fit:contain;
  }
</style>
</head>
<body>

<video id="movie" controls playsinline webkit-playsinline>
  <source src="https://ia800802.us.archive.org/5/items/idiocracia-2006-brrip-m-720p-x-264-ac-3-es/Idiocracia%20%282006%29%20%5BBRrip%20m720p%20x264%20AC3%28ES%29%5D.mp4" type="video/mp4">
  Tu navegador no soporta el video.
</video>

<button id="backButton" onclick="window.location.href='index.html'">⟵</button>

<div id="adOverlay" style="display:none;">
  <video id="adVideo" playsinline webkit-playsinline>
    <source src="https://ia601300.us.archive.org/15/items/youtube-L4PVw0oaZSo/L4PVw0oaZSo.mp4" type="video/mp4">
    Tu navegador no soporta el video de anuncio.
  </video>
</div>

<script>
const movie = document.getElementById('movie');
const backButton = document.getElementById('backButton');
const adOverlay = document.getElementById('adOverlay');
const adVideo = document.getElementById('adVideo');

const adInterval = 10*60; // 10 minutos en segundos
let nextAdTime = adInterval;
let adPlaying = false;
let userInteracted = false;

// Mostrar burbuja de regresar al tocar la pantalla
let hideTimeout;
document.addEventListener('click', () => {
  backButton.style.display = 'block';
  userInteracted = true;
  clearTimeout(hideTimeout);
  hideTimeout = setTimeout(()=>{ backButton.style.display='none'; }, 4000);
});

// Temporizador de anuncios
function startAdTimer(){
  if(!movie.adTimer){
    movie.adTimer = setInterval(()=>{
      if(!adPlaying && movie.currentTime >= nextAdTime){
        playAd();
        nextAdTime += adInterval;
      }
    }, 1000);
  }
}

// Reproducir anuncio
function playAd(){
  adPlaying = true;
  movie.pause();
  adOverlay.style.display = 'flex';
  adVideo.currentTime = 0;
  adVideo.muted = false;

  // Forzar reproducción en iOS/Android
  const playPromise = adVideo.play();
  if(playPromise !== undefined){
    playPromise.catch(()=>{ 
      adVideo.muted = true;
      adVideo.play().catch(()=>{});
    });
  }

  adVideo.onended = () => {
    adOverlay.style.display = 'none';
    adPlaying = false;
    adVideo.muted = false;
    movie.play().catch(()=>{});
  };
}

// Iniciar temporizador cuando el usuario reproduce la película
movie.addEventListener('play', ()=>{
  if(userInteracted) startAdTimer();
});

// Ajustar video a pantalla
function adjustVideoSize(){
  movie.style.width = window.innerWidth + "px";
  movie.style.height = window.innerHeight + "px";
  adVideo.style.width = window.innerWidth + "px";
  adVideo.style.height = window.innerHeight + "px";
}
window.addEventListener('resize', adjustVideoSize);
window.addEventListener('orientationchange', adjustVideoSize);
adjustVideoSize();

// Primer toque para habilitar audio en iOS
document.addEventListener('touchstart', () => { 
  userInteracted = true;
  movie.play().catch(()=>{});
}, {once:true});
</script>

</body>
</html>











